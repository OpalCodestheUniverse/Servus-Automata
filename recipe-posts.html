<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Details</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body class="archive-body">

    <div class="archive-container">
        <a href="recipes.html" class="read-more-btn">‚Üê BACK TO FRIDGE</a>
        
        <header style="margin-top:30px;">
            <h1 id="recipe-title" class="archive-title"></h1>
            <p id="recipe-meta" class="post-date"></p>
        </header>

        <div id="recipe-content" class="post-excerpt">
            </div>
    </div>

    <script>
        const recipeSheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vStHZ3iRZkNhjPh3fXbC_bibt7EJVPdbZ9ZIylsSUzKoePqM5MJ4qZNjxtkCP-LPWVtE0QieO2FBsyI/pub?gid=0&single=true&output=csv';
        const params = new URLSearchParams(window.location.search);
        const recipeId = params.get('id');

        async function loadRecipe() {
            const response = await fetch(recipeSheetUrl);
            const csvText = await response.text();
            
            Papa.parse(csvText, {
                header: true,
                complete: function(results) {
                    const data = results.data[recipeId];
                    if(data) {
                        document.getElementById('recipe-title').innerText = data.Title;
                        document.getElementById('recipe-meta').innerText = `${data.Date} // ${data.Category}`;
                        document.getElementById('recipe-content').innerHTML = data.Content;
                        document.title = data.Title;
                    }
                }
            });
        }
        if (recipeId !== null) loadRecipe();
    </script>
</body>
</html>
