<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple Connect 4</title>
    <style>
        :root { --board-blue: #0055ff; --player1-red: #ff4141; --player2-yellow: #ffdb11; }
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; background: #f0f2f5; }
        #board { display: grid; grid-template-columns: repeat(7, 80px); grid-template-rows: repeat(6, 80px); gap: 10px; padding: 10px; background-color: var(--board-blue); border-radius: 10px; cursor: pointer; }
        .cell { background-color: white; border-radius: 50%; width: 80px; height: 80px; }
        .cell.p1 { background-color: var(--player1-red); }
        .cell.p2 { background-color: var(--player2-yellow); }
        #status { margin: 20px; font-size: 24px; font-weight: bold; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="status">Player 1's Turn (Red)</div>
    <div id="board"></div>
    <br>
    <button onclick="resetGame()">Reset Game</button>

    <script>
        const ROWS = 6;
        const COLS = 7;
        let currentPlayer = 1;
        let board = [];
        let gameOver = false;

        // Initialize board state
        function init() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';
            board = Array(ROWS).fill().map(() => Array(COLS).fill(0));
            
            for (let r = 0; r < ROWS; r++) {
                for (let c = 0; c < COLS; c++) {
                    let cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.id = `cell-${r}-${c}`;
                    cell.addEventListener('click', () => dropPiece(c));
                    boardElement.appendChild(cell);
                }
            }
        }

        function dropPiece(col) {
            if (gameOver) return;
            // Find the lowest empty row in this column
            for (let r = ROWS - 1; r >= 0; r--) {
                if (board[r][col] === 0) {
                    board[r][col] = currentPlayer;
                    updateUI(r, col);
                    if (checkWin(r, col)) {
                        document.getElementById('status').innerText = `Player ${currentPlayer} Wins!`;
                        gameOver = true;
                        return;
                    }
                    currentPlayer = currentPlayer === 1 ? 2 : 1;
                    document.getElementById('status').innerText = `Player ${currentPlayer}'s Turn (${currentPlayer === 1 ? 'Red' : 'Yellow'})`;
                    return;
                }
            }
        }

        function updateUI(r, c) {
            const cell = document.getElementById(`cell-${r}-${c}`);
            cell.classList.add(currentPlayer === 1 ? 'p1' : 'p2');
        }

        function checkWin(r, c) {
            const directions = [[0, 1], [1, 0], [1, 1], [1, -1]]; // horizontal, vertical, diag \, diag /
            return directions.some(([dr, dc]) => {
                let count = 1;
                // Check both directions (forward and backward)
                [[dr, dc], [-dr, -dc]].forEach(([sdr, sdc]) => {
                    let nr = r + sdr, nc = c + sdc;
                    while (nr >= 0 && nr < ROWS && nc >= 0 && nc < COLS && board[nr][nc] === currentPlayer) {
                        count++;
                        nr += sdr; nc += sdc;
                    }
                });
                return count >= 4;
            });
        }

        function resetGame() {
            gameOver = false;
            currentPlayer = 1;
            document.getElementById('status').innerText = "Player 1's Turn (Red)";
            init();
        }

        init();
    </script>
</body>
</html>
